@page "/"

@using System.Linq
@using System.Linq.Expressions

@using MontyClt.Bui.Components
@using MontyClt.Bui.Components.Buttons
@using MontyClt.Bui.Components.Cards
@using MontyClt.Bui.Components.Data
@using MontyClt.Bui.Components.Data.Datatable
@using MontyClt.Bui.Components.Inputs
@using MontyClt.Bui.Components.Layout
@using MontyClt.Bui.Components.Popovers

<Page Title="Order" Subtitle="#25" Columns="3" Rows="2">
    <Actions>
        <Button OnClick="() => Console.WriteLine(52)" State="State.Primary">Provisionar</Button>
        <Button State="State.Danger">Cancelar</Button>
    </Actions>
    <Content>

        <Cell ColumnStart="1" ColumnEnd="3">
            <Card>
                <Header>Pedido #25</Header>
                <Body>
                    El pedido #25 incluye muchas cosas
                </Body>
                <Footer>
                    <ButtonGroup Orientation="ButtonGroup.ButtonGroupOrientation.Horizontal">
                        <Button State="State.Primary">Guardar</Button>
                        <Button State="State.Primary">Detener</Button>
                    </ButtonGroup>

                    <center>
                        <Paginator Items="100" ItemsPerPage="10" />
                    </center>
                </Footer>
            </Card>
        </Cell>

        <Cell ColumnStart="3">
            <Card>
                <Header>Items del pedido</Header>
                <Body>

                </Body>
            </Card>
        </Cell>

        <Cell ColumnStart="1" ColumnEnd="4" RowStart="2">
            <Card FitBody="true">
                <Header>Clientes</Header>
                <Body>
                    <Datatable Items="Individuals" Columns="Columns" IsSelectable="selectable" />
                </Body>
                <Footer>
                    <Button OnClick="ToggleLastNameColumn">Añadir/eliminar columna de apellidos</Button>
                    <Button OnClick="() => selectable = !selectable">Seleccionable</Button>
                </Footer>
            </Card>
        </Cell>

    </Content>
</Page>

@code
{
    Popover menu;
    Popover _left;
    Popover _right;
    Popover _top;
    Popover _bottom;

    string name { get; set; } = "Ivan";
    bool selectable = false;

    class Individual
    {
        public string Name { get; set; }
        public string LastName { get; set; }
    }

    IEnumerable<Individual> Individuals = new Individual[]
    {
        new Individual
        {
            Name = "IVAN",
            LastName = "MONTILLA"
        },
        new Individual
        {
            Name = "JOSÉ",
            LastName = "BELLIDO"
        },
        new Individual
        {
            Name = "CARLA",
            LastName = "PLANES"
        }
    };

    IList<Column<Individual>> Columns = new List<Column<Individual>>
    {
        new Column<Individual>("Nombre", x => x.Name),
        new Column<Individual>("Apellidos", x => x.LastName, true),
    };

    void ToggleLastNameColumn()
    {
        if (Columns.Count() == 1)
            Columns.Add(new Column<Individual>("Apellidos", x => x.LastName, true));
        else
            Columns.RemoveAt(1);
    }
}